import React, { useEffect } from 'react';
import 'bootstrap/dist/css/bootstrap.min.css'; // Para el CSS de Bootstrap
import 'bootstrap/dist/js/bootstrap.bundle.min'; // Para el JS de Bootstrap
import SimpleLightbox from 'simple-lightbox'; // Para el plugin SimpleLightbox
import '../../index.css';
import 'bootstrap-icons/font/bootstrap-icons.css';
import * as bootstrap from 'bootstrap';

const useNavbarShrink = () => {
    useEffect(() => {
        const navbarShrink = () => {
            const navbarCollapsible = document.querySelector('#mainNav');
            if (!navbarCollapsible) return;

            if (window.scrollY === 0) {
                navbarCollapsible.classList.remove('navbar-shrink');
            } else {
                navbarCollapsible.classList.add('navbar-shrink');
            }
        };

        // Shrink the navbar on scroll
        navbarShrink();
        window.addEventListener('scroll', navbarShrink);

        return () => {
            window.removeEventListener('scroll', navbarShrink);
        };
    }, []);
};

const useBootstrapPlugins = () => {
    useEffect(() => {
        // Activate Bootstrap scrollspy on the main nav element
        const mainNav = document.querySelector('#mainNav');
        if (mainNav) {
            new bootstrap.ScrollSpy(document.body, {
                target: '#mainNav',
                rootMargin: '0px 0px -40%',
            });
        }

        // Activate SimpleLightbox plugin for portfolio items
        new SimpleLightbox({
            elements: '#portfolio a.portfolio-box',
        });
    }, []);
};

const Navbar = () => {
    useNavbarShrink();
    useBootstrapPlugins();

    return (
        <nav className="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
            <div className="container px-4 px-lg-5">
                <a className="navbar-brand" href="#page-top">Your CVE's baker</a>
                <button
                    className="navbar-toggler navbar-toggler-right"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarResponsive"
                    aria-controls="navbarResponsive"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span className="navbar-toggler-icon"></span>
                </button>
                <div className="collapse navbar-collapse" id="navbarResponsive">
                    <ul className="navbar-nav ms-auto my-2 my-lg-0">
                        <li className="nav-item"><a className="nav-link" href="#about">About</a></li>
                        <li className="nav-item"><a className="nav-link" href="#services">What we do</a></li>
                        <li className="nav-item"><a className="nav-link" href="#portfolio">CVE's Bakery</a></li>
                        <li className="nav-item"><a className="nav-link" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    );
};

export default Navbar;
